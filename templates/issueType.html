<section class="content-header">

	<h1  ng-class="loading ? 'hide' : ''">
		{{issueType.type}}
	</h1>

	<ol class="breadcrumb"  ng-class="loading ? 'hide' : ''">
		<li><a href="" ui-sref="main.dashboard"><i class="fa fa-dashboard"></i> Dashboard</a></li>
		<li><a href="" ui-sref="main.project({projectId: issueType.projectId})">{{issueType.projectName}}</a></li>
		<li><a href="" ui-sref="main.project.application({projectId: issueType.projectId, applicationId: issueType.applicationId})">{{issueType.applicationName}}</a></li>
		<li><a href="" ui-sref="main.version({versionId: issueType.versionId})">{{issueType.version}}</a></li>
		<li><a href="" ui-sref="main.issueType({issueTypeKey: issueType.id})" class="active">{{issueType.type}}</a></li>
	</ol>

</section>

<loading isLoading="{{loading}}"></loading>

<section class="content">
	
	<div class="row" ng-class="loading ? 'hide' : ''">
	
		<div class="col-lg-12">
		
			<div class="box box-primary">
			
				<div class="box-header with-border">
				
					<span class="label vcenter label-{{issueType.level == 'Warning' ? 'warning' : (issueType.level == 'Error' ? 'danger' : 'primary')}}" >{{issueType.level}}</span>
					
					<h3 class="box-title">
						{{issueType.message}}
					</h3>
					
					
				</div>
									
				<div class="box-body" >
								
					<div >
						
						<h4>Stack Trace</h4>
						
						<pre>{{issueType.stackTrace}}</pre>
						
					</div>
					
				</div>
				
			</div>
			
		</div>
		
		<div class="col-lg-12">
		
			<div class="box box-primary">
			
				<div class="box-header with-border">
				
					<h3 class="box-title">
						Issues
					</h3>
					
				</div>
				
				<div class="box-body">
						
					<div class="table-responsive">
					
						<table class="table table-hover">
							
							<thead>
								
								<tr>
									<th></th>							
									<th><a href="" ng-click="orderByField='time'; reverseSort = !reverseSort">Time</a></th>
									<th><a href="" ng-click="orderByField='user'; reverseSort = !reverseSort">User</a></th>
									<th><a href="" ng-click="orderByField='enviroment'; reverseSort = !reverseSort">Enviroment</a></th>
									
								</tr>
								
							</thead>
							
							<tbody>
								
								<tr ng-repeat-start="issue in issueType.issues | orderBy:orderByField:reverseSort | startFrom:((currentPage-1)*20) | limitTo: 20 "  ng-click="issue.data != null ? (issue.expanded = !issue.expanded) : ('')" class="clickable-row" ng-class="issue.expanded ? 'alt-bg' : ''">
									<td style="width:5px;"><i class="fa fa-info" ng-if="issue.data != null"></i></td>
									<td time="{{issue.time}}"></td>
									<td>{{issue.user}}</td>
									<td><span class="label label-primary">{{issue.enviroment}}</span></td>
									
								</tr>
								
								<tr ng-if="issue.expanded" ng-repeat-end="" class="alt-bg" ng-if="issue.data != null">
									
									<td colspan="4">
										<p ng-repeat="(key, value) in issue.data">{{key}}: {{value}}</p>
									</td>
									
								</tr>
								
							</tbody>
							
						</table>
						
					</div>
					
				</div>
					
				<div class="box-footer">
					
					<uib-pagination total-items="issueType.issues.length" items-per-page="20" ng-model="currentPage" max-size="5" ></uib-pagination>
					
				</div>
				
			</div>
			
		</div>
		
	</div>
	
</section>