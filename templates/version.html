<section class="content-header" >
		
	<h1 ng-class="loading ? 'hide' : ''">
		{{version.applicationName}}
		<small>v{{version.versionNumber}}</small>
	</h1>

	<ol class="breadcrumb" ng-class="loading ? 'hide' : ''">
		
		<li><a href="" ui-sref="main.dashboard"><i class="fa fa-dashboard"></i> Dashboard</a></li>
		<li><a href="" ui-sref="main.project({projectId: version.projectKey})">{{version.projectName}}</a></li>
		<li><a href="" ui-sref="main.project.application({projectId: version.projectKey, applicationId: version.applicationKey})">{{version.applicationName}}</a></li>
		<li><a href="" ui-sref="main.version({projectId: version.projectKey, applicationId: version.applicationKey, versionId: version.versionKey})" class="active">{{version.versionNumber}}</a></li>
		
	</ol>
		
</section>

<loading isLoading="{{loading}}"></loading>

<section class="content">

	<div class="row" ng-class="loading ? 'hide' : ''">
	
		<div class="col-lg-12">
		
			<div class="box box-primary">
			
				<div class="box-header with-border">
					
					<h3 class="box-title">Issue Types</h3>
					
				</div>
				
				<div class="box-body">
						
					<div class="table-responsive">
					
						<table class="table table-hover table-striped" ng-init="orderByField='ticket'; reverseSort=true;">
							
							<thead>
		
								<tr>
									
									<th></th>
									<th><a href="" ng-click="orderByField='ticket'; reverseSort = !reverseSort">Ticket</a></th>
									<th><a href="" ng-click="orderByField='type'; reverseSort = !reverseSort">Type</a></th>
									<th><a href="" ng-click="orderByField='issueCount'; reverseSort = !reverseSort">Issues</a></th>
									<th><a href="" ng-click="orderByField='level'; reverseSort = !reverseSort">Level</a></th>
									<th><a href="" ng-click="orderByField='lastIssue'; reverseSort = !reverseSort">Last Issue</a></th>
									<th>Enviroments</th>
																	
								</tr>
								
							</thead>
								
							<tbody>
								
								<tr ng-repeat="issueType in version.issueTypes | orderBy:orderByField:reverseSort" class="clickable-row">
								
									<td style="width:56px;">
										
    									<button popover-placement="right" uib-popover="{{issueType.message}}" popover-trigger="focus" type="button" class="btn btn-primary fa fa-comment"></button>
										
									</td>									
									
									<td ui-sref="main.issueType({issueTypeKey: issueType.issueTypeKey})">{{issueType.ticket}}</td>									
									<td ui-sref="main.issueType({issueTypeKey: issueType.issueTypeKey})">{{issueType.type}}</td>									
									<td ui-sref="main.issueType({issueTypeKey: issueType.issueTypeKey})">{{issueType.issueCount}}</td>									
									<td ui-sref="main.issueType({issueTypeKey: issueType.issueTypeKey})">
										<span class="label label-{{issueType.level == 'Warning' ? 'warning' : (issueType.level == 'Error' ? 'danger' : 'primary')}}">{{issueType.level}}</span>
									</td>									
									<td ui-sref="main.issueType({issueTypeKey: issueType.issueTypeKey})" time="{{issueType.lastIssue}}"></td>
									<td ui-sref="main.issueType({issueTypeKey: issueType.issueTypeKey})">
										<span class="label label-primary enviroment" ng-repeat="enviroment in issueType.enviroments | orderBy:enviroment">{{enviroment}}</span>
									</td>			
								
								</tr>
								
							</tbody>                                                        
							
						</table>
						
					</div>			
			
				</div>
				
			</div>
			
		</div>
		
		<div class="col-lg-12">
		
			<div class="box box-primary">
			
				<div class="box-header with-border">
					
					<h3 class="box-title">Sessions</h3>
					
				</div>
				
				<div class="box-body">
						
					<div class="table-responsive">
					
						<table class="table table-hover table-striped">
							
							<thead>
		
								<tr>
									
                                    <th><a href="" ng-click="orderByField2='serverStartTime'; reverseSort2 = !reverseSort2">Start</a></th>
                                    <th><a href="" ng-click="orderByField2='lastUsedServerTime'; reverseSort2 = !reverseSort2">Duration</a></th>
                                    <th><a href="" ng-click="orderByField2='userName'; reverseSort2 = !reverseSort2">User</a></th>
                                    <th><a href="" ng-click="orderByField2='machineName'; reverseSort2 = !reverseSort2">Machine</a></th>
                                    <th><a href="" ng-click="orderByField2='environment'; reverseSort2 = !reverseSort2">Environment</a></th>
                                    <th><a href="" ng-click="orderByField2='callerIp'; reverseSort2 = !reverseSort2">Caller Ip</a></th>
																	
								</tr>
								
							</thead>
								
							<tbody>
								
								<tr ng-repeat="session in version.sessions | orderBy:orderByField2:reverseSort2" class="clickable-row">
								
                                    <td time="{{session.serverStartTime}}"></td>
                                    <td>{{session.duration}}</td>
                                    <td>{{session.userName}}</td>
                                    <td>{{session.machineName}}</td>
                                    <td ><span class="label label-primary enviroment">{{session.environment}}</span></td>
                                    <td>{{session.callerIp}}</td>
								
								</tr>
								
							</tbody>                                                        
							
						</table>
						
					</div>			
			
				</div>
				
			</div>
			
		</div>

	</div>

</div>